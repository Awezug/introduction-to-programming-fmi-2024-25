# Бройни системи. Побитови операции.

### Бройни системи

Бройната система е начин за представяне на числа с помощта на определен набор от символи (цифри) и правила. Различните бройни системи използват различна **основа (base)**, която определя броя на уникалните символи в системата.

---

#### Десетична бройна система (Decimal, base 10)

- Най-познатата и използвана система.
- Използва цифрите: `0, 1, 2, 3, 4, 5, 6, 7, 8, 9`.
- **Пример**: Числото `345` означава:  
  \[
  3 \cdot 10^2 + 4 \cdot 10^1 + 5 \cdot 10^0
  \]

#### Двоична бройна система (Binary, base 2)

- Използва се в компютърните науки.
- Използва цифрите: `0` и `1`.
- **Пример**: Числото `1011` в двоична система означава:  
  \[
  1 \cdot 2^3 + 0 \cdot 2^2 + 1 \cdot 2^1 + 1 \cdot 2^0 = 11
  \]

#### Осмична бройна система (Octal, base 8)

- Използва цифрите: `0, 1, 2, 3, 4, 5, 6, 7`.
- **Пример**: Числото `17` в осмична система означава:  
  \[
  1 \cdot 8^1 + 7 \cdot 8^0 = 15
  \]

#### Шестнадесетична бройна система (Hexadecimal, base 16)

- Използва цифрите: `0, 1, 2, 3, 4, 5, 6, 7, 8, 9, A, B, C, D, E, F`, където:
  - `A = 10`, `B = 11`, ..., `F = 15`.
- **Пример**: Числото `1F` в шестнадесетична система означава:  
  \[
  1 \cdot 16^1 + 15 \cdot 16^0 = 31
  \]

---

### Преобразуване между бройни системи

#### От друга система към десетична

Формула:  
\[
N = c_0 \cdot B^0 + c_1 \cdot B^1 + ... + c_k \cdot B^k
\]  
където \( c_i \) са цифрите, а \( B \) е основата.

**Пример**: \( 101 \) в двоична:  
\[
101*2 = 1 \cdot 2^2 + 0 \cdot 2^1 + 1 \cdot 2^0 = 5*{10}
\]

---

#### От десетична към друга система

Използва се **деление с остатък**:

1. Разделяме числото на основата и записваме остатъка.
2. Продължаваме, докато резултатът от делението е 0.
3. Остатъците се записват в обратен ред.

**Пример**: Преобразуване на \( 13 \) от десетична към двоична:

- \( 13 \div 2 = 6 \) (остатък 1),
- \( 6 \div 2 = 3 \) (остатък 0),
- \( 3 \div 2 = 1 \) (остатък 1),
- \( 1 \div 2 = 0 \) (остатък 1).

Резултат: \( 13\_{10} = 1101_2 \).

---

#### Между недесетични системи

1. Преобразуваме първо към десетична.
2. След това към желаната система.

---

|        | Двоична (binary) | Десетична (decimal) | Шестнайсетична (hexadecimal) |
| ------ | ---------------- | ------------------- | ---------------------------- |
| Aзбука | 0-1              | 0-9                 | 0-F (0-9 & A-F)              |
| Основа | 2                | 10                  | 16                           |

---

| Десетична (decimal) | Двоична (binary) | Осмична (octal) | Шестнадесетична (hexadecimal) |
| ------------------: | ---------------: | --------------: | ----------------------------: |
|                   0 |                0 |               0 |                             0 |
|                   1 |                1 |               1 |                             1 |
|                   2 |               10 |               2 |                             2 |
|                   3 |               11 |               3 |                             3 |
|                   4 |              100 |               4 |                             4 |
|                   5 |              101 |               5 |                             5 |
|                   6 |              110 |               6 |                             6 |
|                   7 |              111 |               7 |                             7 |
|                   8 |             1000 |              10 |                             8 |
|                   9 |             1001 |              11 |                             9 |
|                  10 |             1010 |              12 |                             A |
|                  11 |             1011 |              13 |                             B |
|                  12 |             1100 |              14 |                             C |
|                  13 |             1101 |              15 |                             D |
|                  14 |             1110 |              16 |                             E |
|                  15 |             1111 |              17 |                             F |
|                 ... |              ... |             ... |                           ... |
|                 255 |         11111111 |             377 |                            FF |

---

### Представяне на отрицателни числа

Пример за представяне на -5 (8-бита):

Знаем, че 5=
`00000101`.

1. Инверсия: `00000101` ->
   `11111010`

2. Добавяне на 1:
   `11111010` -> `11111011`

Така компилаторът интерпретира `11111011` като −5.

---

### Побитови операции

Побитовите операции в C++ работят директно с битовете на числата. Позволяват манипулиране на отделните битове в двоичните представяния на числата.

| Operator |                    Description                     |
| :------: | :------------------------------------------------: |
|    <<    |  Bitwise left shift \| Побитово отместване наляво  |
|    >>    | Bitwise right shift \| Побитово отместване надясно |
|    &     |             Bitwise AND \| Побитово И              |
|    \|    |             Bitwise OR \| Побитово ИЛИ             |
|    ~     |             Bitwise NOT \| Побитово НЕ             |
|    ^     |       Bitwise XOR \| Побитово ИЗКЛЮЧВАЩО ИЛИ       |

<br />

|     a     |     b     |   a & b   |  a \| b   |   a ^ b   |  a << 2   |  a >> 2   |    ~a     |    ~b     |
| :-------: | :-------: | :-------: | :-------: | :-------: | :-------: | :-------: | :-------: | :-------: |
| 101010100 | 100101110 | 100000100 | 101111110 | 001111010 | 101010000 | 001010101 | 010101011 | 011010001 |

---
### Примерни казуси за използване на побитови операции

1. **Управление на флагове (набор от битови стойности):**

   Представяне на няколко флага в едно число (напр. права на достъп).

   ```cpp
   int flags = 0;       // Всички флагове изключени (00000000)
   flags |= (1 << 2);   // Вдигане на 3-ти флаг (00000100)
   flags |= (1 << 1);  // Вдигане на 2-ри флаг (00000110)
   flags &= ~(1 << 2);  // Сваляне на 3-ти флаг (00000010)
   ```

2. **Проверка на четност:**

   Побитово "И" с `1` определя дали числото е четно или нечетно.

   ```cpp
   if (x & 1) {
       cout << "Нечетно число" << endl;
   } else {
       cout << "Четно число" << endl;
   }
   ```

3. **Бързо умножение и деление на степени на 2:**

   Лявото изместване е еквивалентно на умножение по 2, а дясното на деление на 2.

   ```cpp
   int x = 5;
   cout << (x << 1) << endl; // Умножение по 2 (10)
   cout << (x >> 1) << endl; // Деление на 2 (2)
   ```

4. **Обратни битови маски:**

   Използване на комбинации от `&` и `~` за изчистване на определени битове.

   ```cpp
   int x = 0b101011;    // Число в двоична форма
   x &= ~(1 << 2);      // Нулиране на 3-тия бит
   cout << x << endl;   // Изход: 0b101001
   ```

5. **XOR за размяна на стойности:**

   Размяна на две числа без помощна променлива.

   ```cpp
   int a = 5, b = 3;
   a = a ^ b;
   b = a ^ b;
   a = a ^ b;
   cout << "a = " << a << ", b = " << b << endl; // a = 3, b = 5
   ```

---
